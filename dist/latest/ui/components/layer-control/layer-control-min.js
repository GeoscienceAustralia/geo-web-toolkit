(function(){var a=angular.module("gawebtoolkit.ui.components.layer-control",["gawebtoolkit.ui.directives","ui.utils","gawebtoolkit.utils"]);a.directive("gaLayerControl",["GAWTUtils",function(c){return{restrict:"E",templateUrl:"src/main/js/ui/components/layer-control/layer-control.html",scope:{layerData:"=",mapController:"=",onVisible:"&",onHidden:"&",onOpacityChange:"&",layerDisabled:"=",onStartLoading:"&",onFinishedLoading:"&"},controller:["$scope",function(d){d.elementId=c.generateUuid()}],compile:function b(){return{post:function d(g){var f=function(){g.onStartLoading({layerId:g.layerData.id})};var h=function(){g.onFinishedLoading({layerId:g.layerData.id})};g.$watch("layerData",function(i){if(i!=null){g.layerData.visibility=g.layerData.visibility===true||g.layerData.visibility==="true";if(g.mapController==null){throw new Error("mapController is not available")}if(g.layerData.id!=null){g.mapController.registerLayerEvent(g.layerData.id,"loadstart",f);g.mapController.registerLayerEvent(g.layerData.id,"loadend",h)}}})},pre:function e(f){f.changeOpacity=function(g,h){f.onOpacityChange({layerId:g,opacity:h})};f.layerClicked=function(){f.layerData.visibility=!f.layerData.visibility;f.mapController.setLayerVisibility(f.layerData.id,f.layerData.visibility);if(f.layerData.visibility){f.onVisible({layerId:f.layerData.id})}else{f.onHidden({layerId:f.layerData.id})}}}}},transclude:true}}])})();