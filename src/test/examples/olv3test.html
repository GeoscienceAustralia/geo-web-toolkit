<!DOCTYPE html>
<html ng-app="simpleMap">
<head lang="en">
    <meta charset="UTF-8">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/proj4js/2.2.1/proj4.js"></script>
    <script src="http://openlayers.org/en/v3.2.1/build/ol.js"></script>
    <script src="http://dev.openlayers.org/OpenLayers.js"></script>
    <script src="../../../bower_components/jquery/dist/jquery.js"></script>
    <script src="../../../bower_components/angular/angular.js"></script>
    <script src="../../main/js/geo-web-toolkit-min.js"></script>
    <script src="http://epsg.io/21781-1753.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://openlayers.org/en/v3.2.1/css/ol.css"/>
    <title>OpenLayers 3 Example Map</title>
</head>
<body>
<h1>OpenLayers 3 Example Map</h1>
<div id="map" style="width:100%;height:500px;"></div>
<ga-map map-element-id="map" framework="olv3" display-projection="EPSG:4326" datum-projection="EPSG:21781" initial-extent="[[420000, 30000],[900000, 350000]]" zoom-level="2" center-position="[8.23, 46.86]">
    <ga-map-layer layer-name="test1"
                  layer-type="WMS"
                  layer-url="http://wms.geo.admin.ch/"
                  layers="ch.swisstopo.pixelkarte-farbe-pk1000.noscale"
                  format="image/jpeg">
    </ga-map-layer>
    <ga-map-layer layer-name="test2"
                  layer-type="WMS"
                  layer-url="http://wms.geo.admin.ch/"
                  layers="ch.bafu.schutzgebiete-paerke_nationaler_bedeutung">
    </ga-map-layer>
    <ga-map-control map-control-name="scaleline"></ga-map-control>
</ga-map>
<script>
    var app = angular.module('simpleMap',['gawebtoolkit.core']);

</script>


<div id="map1" style="width:100%;height:500px;"></div>
<script>
    // Transparent Proj4js support: ol.proj.get() creates and returns a projection
    // known to Proj4js if it is unknown to OpenLayers, and registers functions to
    // transform between all registered projections.
    // EPSG:21781 is known to Proj4js because its definition was loaded in the html.
    // Note that we are getting the projection object here to set the extent. If
    // you do not need this, you do not have to use ol.proj.get(); simply use the
    // string code in the view projection below and the transforms will be
    // registered transparently.
    var projection = ol.proj.get('EPSG:21781');
    // The extent is used to determine zoom level 0. Recommended values for a
    // projection's validity extent can be found at http://epsg.io/.
    projection.setExtent([485869.5728, 76443.1884, 837076.5648, 299941.7864]);

    var extent = [420000, 30000, 900000, 350000];
    var layers = [
        new ol.layer.Image({
            extent: extent,
            source: new ol.source.ImageWMS({
                url: 'http://wms.geo.admin.ch/',
                crossOrigin: 'anonymous',
                attributions: [new ol.Attribution({
                    html: '&copy; ' +
                    '<a href="http://www.geo.admin.ch/internet/geoportal/' +
                    'en/home.html">' +
                    'Pixelmap 1:1000000 / geo.admin.ch</a>'
                })],
                params: {
                    'LAYERS': 'ch.swisstopo.pixelkarte-farbe-pk1000.noscale',
                    'FORMAT': 'image/jpeg'
                },
                serverType: /** @type {ol.source.wms.ServerType} */ ('mapserver')
            })
        }),
        new ol.layer.Image({
            extent: extent,
            source: new ol.source.ImageWMS({
                url: 'http://wms.geo.admin.ch/',
                crossOrigin: 'anonymous',
                attributions: [new ol.Attribution({
                    html: '&copy; ' +
                    '<a href="http://www.geo.admin.ch/internet/geoportal/' +
                    'en/home.html">' +
                    'National parks / geo.admin.ch</a>'
                })],
                params: {'LAYERS': 'ch.bafu.schutzgebiete-paerke_nationaler_bedeutung'},
                serverType: /** @type {ol.source.wms.ServerType} */ ('mapserver')
            })
        })
    ];

    var map = new ol.Map({
        target: 'map1',
        view: new ol.View({
            projection: projection,
            center: ol.proj.transform([8.23, 46.86], 'EPSG:4326', 'EPSG:21781'),
            extent: extent,
            zoom: 2
        }),
        controls: []
    });
    map.addLayer(layers[0]);
    map.addLayer(layers[1])
    map.addControl(new ol.control.ScaleLine());

</script>

</body>
</html>