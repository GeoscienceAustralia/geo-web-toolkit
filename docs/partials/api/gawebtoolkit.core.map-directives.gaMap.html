<h1><code ng:non-bindable="">gaMap</code>
<div><span class="hint">directive in module <code ng:non-bindable="">gawebtoolkit.core</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><h4 id="description_overview">Overview</h4>
<p>gaMap directive is used to create a map.</p>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage">as element:<pre class="prettyprint linenums">&lt;ga-map
       map-element-id="{string|@}"
       datum-projection="{string|@}"
       display-projection="{string|@}"
       [center-position="{string|@}"]
       [zoom-level="{number|@}"]
       [initial-extent="{geoJsonCoordinates|=}"]&gt;
&lt;/ga-map&gt;</pre>
<h3 id="usage_directive-info">Directive info</h3>
<div class="directive-info"><ul><li>This directive creates new scope.</li>
</ul>
</div>
<h4 id="usage_directive-info_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>mapElementId</td><td><a href="" class="label type-hint type-hint-string">string</a><a href="" class="label type-hint type-hint-object">@</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><ul>
<li>The id of the element where the map is to be rendered</li>
</ul>
</div></td></tr><tr><td>datumProjection</td><td><a href="" class="label type-hint type-hint-string">string</a><a href="" class="label type-hint type-hint-object">@</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><ul>
<li>A value representing the Datum Projection, eg &#39;EPSG:4326&#39;</li>
</ul>
</div></td></tr><tr><td>displayProjection</td><td><a href="" class="label type-hint type-hint-string">string</a><a href="" class="label type-hint type-hint-object">@</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><ul>
<li>A value representing the Display Projection, eg &#39;EPSG:4326&#39;</li>
</ul>
</div></td></tr><tr><td>centerPosition <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a><a href="" class="label type-hint type-hint-object">@</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><ul>
<li>A comma separated value representing lon/lat of the initial center position.</li>
</ul>
</div></td></tr><tr><td>zoomLevel <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-number">number</a><a href="" class="label type-hint type-hint-object">@</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><ul>
<li>An initial zoom value for the map to start at.</li>
</ul>
</div></td></tr><tr><td>initialExtent <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-geojsoncoordinates">geoJsonCoordinates</a><a href="" class="label type-hint type-hint-object">=</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><ul>
<li>An initial extent is the form of a geoJson array of coordinates.</li>
</ul>
</div></td></tr></tbody></table></div>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><h3 id="methods_addcontrol">addControl(controlName, controlOptions, elementId, controlId)</h3>
<div class="addcontrol"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addcontrol-page"><p>Creates and adds a control to the map instance</p>
</div><h5 id="methods_addcontrol_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>controlName</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addcontrol-page"><ul>
<li>the name of the type of control to be created</li>
</ul>
</div></td></tr><tr><td>controlOptions</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addcontrol-page"><ul>
<li>an objet with implementation specific controlOptions</li>
</ul>
</div></td></tr><tr><td>elementId <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addcontrol-page"><ul>
<li>a DOM element to add the control to.</li>
</ul>
</div></td></tr><tr><td>controlId <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addcontrol-page"><ul>
<li>An id to help interact with the control when using &#39;ById&#39; methods</li>
</ul>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_addlayer">addLayer(layer)</h3>
<div class="addlayer"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addlayer-page"><p>Adds a layer to the underlying mapInstance calling the appropriate implementation specific service.</p>
</div><h5 id="methods_addlayer_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>layer</td><td><a href="" class="label type-hint type-hint-object">*</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addlayer-page"><ul>
<li>An implementation object for a layer, eg an olv2 layer object</li>
</ul>
</div></td></tr></tbody></table><h5 id="methods_addlayer_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-layer">Layer</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addlayer-page"><ul>
<li>layer object representing implementation.</li>
</ul>
</div></td></tr></table><h4 id="methods_addlayer_example">Example</h4>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-addlayer-page"><p><code><pre class="prettyprint linenums">
var args {
 layerName: 'foo',
 layerUrl: 'http://wmsserver/wmsaddress',
layers: 'comma, separated, list of, layers',
layerType: 'WMS'
}
var layer = $scope.mapController.createLayer(args);
var dto = $scope.mapController.addLayer(layer);</pre></code></p>
</div></div>
</div>
</li>
<li><h3 id="methods_currentzoomlevel">currentZoomLevel()</h3>
<div class="currentzoomlevel"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-currentzoomlevel-page"><p>Gets the current zoom level of the map</p>
</div><h5 id="methods_currentzoomlevel_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-number">Number</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-currentzoomlevel-page"><ul>
<li>Zoom level.</li>
</ul>
</div></td></tr></table><h4 id="methods_currentzoomlevel_example">Example</h4>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-currentzoomlevel-page"><p><code><pre class="prettyprint linenums">var zoomLevel = $scope.mapController.currentZoomLevel();</pre></code></p>
</div></div>
</div>
</li>
<li><h3 id="methods_getlayers">getLayers()</h3>
<div class="getlayers"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlayers-page"><p>Gets all the layers currently associated with the map instance</p>
</div><h5 id="methods_getlayers_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-layer">Layer[]</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlayers-page"><ul>
<li>An array of layers currently on the map</li>
</ul>
</div></td></tr></table><h4 id="methods_getlayers_example">Example</h4>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlayers-page"><p><code><pre class="prettyprint linenums">var layers = $scope.mapController.getLayers();
$scope.mapController.zoomToLayer(layers[0].id);</pre></code></p>
</div></div>
</div>
</li>
<li><h3 id="methods_getlonlatfrompixel">getLonLatFromPixel(x, y, projection)</h3>
<div class="getlonlatfrompixel"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlonlatfrompixel-page"><p>Gets a latlon object from implementation service</p>
</div><h5 id="methods_getlonlatfrompixel_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>x</td><td><a href="" class="label type-hint type-hint-number">Number</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlonlatfrompixel-page"><ul>
<li>number of pixels from the left of the div containing the map</li>
</ul>
</div></td></tr><tr><td>y</td><td><a href="" class="label type-hint type-hint-number">Number</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlonlatfrompixel-page"><ul>
<li>number of pixels from the top of the div containing the map</li>
</ul>
</div></td></tr><tr><td>projection</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlonlatfrompixel-page"><ul>
<li>a projection to convert to from the maps projection</li>
</ul>
</div></td></tr></tbody></table><h5 id="methods_getlonlatfrompixel_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-lonlat">LonLat</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlonlatfrompixel-page"><p>An object containing Latitude and Longitude in the projection of the map</p>
</div></td></tr></table><h4 id="methods_getlonlatfrompixel_example">Example</h4>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getlonlatfrompixel-page"><p><code><pre class="prettyprint linenums">var lonLat = mapController.getLonLatFromPixel(200,500)
// eg, lonLat equals lat: -30.967, lon: 108.552</pre></code></p>
</div></div>
</div>
</li>
<li><h3 id="methods_getpixelfromlonlat">getPixelFromLonLat(lon, lat)</h3>
<div class="getpixelfromlonlat"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpixelfromlonlat-page"><p>Gets a latlon object from implementation service</p>
</div><h5 id="methods_getpixelfromlonlat_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>lon</td><td><a href="" class="label type-hint type-hint-number">Number</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpixelfromlonlat-page"><ul>
<li>The latitude of the location to transform</li>
</ul>
</div></td></tr><tr><td>lat</td><td><a href="" class="label type-hint type-hint-number">Number</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpixelfromlonlat-page"><ul>
<li>The longitude of the location to transform</li>
</ul>
</div></td></tr></tbody></table><h5 id="methods_getpixelfromlonlat_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-point">Point</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpixelfromlonlat-page"><ul>
<li>An object containing Latitude and Longitude in the projection of the map</li>
</ul>
</div></td></tr></table><h4 id="methods_getpixelfromlonlat_example">Example</h4>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpixelfromlonlat-page"><p><code><pre class="prettyprint linenums">var point = mapController.getPixelFromLonLat(-20,-100);
// eg, point equals x: 25, y: 63</pre></code></p>
</div></div>
</div>
</li>
<li><h3 id="methods_getpointfromevent">getPointFromEvent(event)</h3>
<div class="getpointfromevent"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpointfromevent-page"><p>Extracts a point from an event coming from implementation service layer.</p>
</div><h5 id="methods_getpointfromevent_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>event</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpointfromevent-page"><ul>
<li>An event from implementation, eg OpenLayers,
worked out from number of pixels from the left of the div containing the map</li>
</ul>
</div></td></tr></tbody></table><h5 id="methods_getpointfromevent_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-point">Point</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-getpointfromevent-page"><ul>
<li>A point object extracted from the event.</li>
</ul>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_registermapclick">registerMapClick(callback)</h3>
<div class="registermapclick"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-registermapclick-page"><p>Registers an event that will fire when the rendered map is clicked.
Event details coming back will be implementation specific</p>
</div><h5 id="methods_registermapclick_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>callback</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-registermapclick-page"><ul>
<li>callback function that fires when the map is clicked.</li>
</ul>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_registermapmousemove">registerMapMouseMove(callback)</h3>
<div class="registermapmousemove"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-registermapmousemove-page"><p>Registers a mouse movement event and calls provided callback.
Event details coming back will be implementation specific</p>
</div><h5 id="methods_registermapmousemove_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>callback</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-registermapmousemove-page"><ul>
<li>callback function that fires when the mouse move event occurs.</li>
</ul>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_registermapmousemoveend">registerMapMouseMoveEnd(callback)</h3>
<div class="registermapmousemoveend"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-registermapmousemoveend-page"><p>Registers an event callback with mapInstance when the mouse stops moving over the map</p>
</div><h5 id="methods_registermapmousemoveend_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>callback</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-registermapmousemoveend-page"><ul>
<li>callback function that fires when the mouse move end event occurs.</li>
</ul>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_unregistermapclick">unRegisterMapClick(callback)</h3>
<div class="unregistermapclick"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-unregistermapclick-page"><p>Unregisters a map click event from the map instance.</p>
</div><h5 id="methods_unregistermapclick_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>callback</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-unregistermapclick-page"><ul>
<li>callback function that was originally registered.</li>
</ul>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_zoomtolayer">zoomToLayer(layerId)</h3>
<div class="zoomtolayer"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-zoomtolayer-page"><p>If possible, performs an action to zoom in on the extent of a layer associated with Id</p>
</div><h5 id="methods_zoomtolayer_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>layerId</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-zoomtolayer-page"><ul>
<li>Id of the layer to zoom too.</li>
</ul>
</div></td></tr></tbody></table><h4 id="methods_zoomtolayer_example">Example</h4>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-zoomtolayer-page"><p><code><pre class="prettyprint linenums">var layers = $scope.mapController.getLayers();
$scope.mapController.zoomToLayer(layers[0].id);</pre></code></p>
</div></div>
</div>
</li>
<li><h3 id="methods_zoomtomaxextent">zoomToMaxExtent()</h3>
<div class="zoomtomaxextent"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-zoomtomaxextent-page"><p>Zooms to the maximum extent of the map</p>
</div><h4 id="methods_zoomtomaxextent_example">Example</h4>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-zoomtomaxextent-page"><p><code><pre class="prettyprint linenums">$scope.mapController.zoomToMaxExtent();</pre></code></p>
</div></div>
</div>
</li>
</ul>
</div>
<h2 id="example">Example</h2>
<div class="example"><div class="gawebtoolkit-core-map-directives-page gawebtoolkit-core-map-directives-gamap-page"><h4 id="example_source">Source</h4>
<div source-edit="simpleMap" source-edit-deps="angular.js script.js" source-edit-html="index.html-12" source-edit-css="style.css-13" source-edit-js="script.js-14" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="index.html">
<pre class="prettyprint linenums" ng-set-text="index.html-12" ng-html-wrap-loaded="simpleMap angular.js script.js"></pre>
<script type="text/ng-template" id="index.html-12">
        <div id="map"></div>
        <ga-map map-element-id="map">
            <ga-map-layer layer-name="Simple map layer name"  layer-type="WMS" layer-url="http://basemap.nationalmap.gov/ArcGIS/services/USGSTopo/MapServer/WMSServer" is-base-layer="true">
                </ga-map-layer>
            <ga-map-control map-control-name="mouseposition"></ga-map-control>
        </ga-map>
</script>
</div>
<div class="tab-pane" title="style.css">
<pre class="prettyprint linenums" ng-set-text="style.css-13"></pre>
<style type="text/css" id="style.css-13">#map {width: 650px;height:600px;}</style>
</div>
<div class="tab-pane" title="script.js">
<pre class="prettyprint linenums" ng-set-text="script.js-14"></pre>
<script type="text/ng-template" id="script.js-14">var app = angular.module('simpleMap',['gawebtoolkit.core']);</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="simpleMap" ng-set-html="index.html-12" ng-eval-javascript="script.js-14"></div>
</div></div>
</div>
